{"version":3,"file":"4.1f803fd566689c2fe1f5.hot-update.js","sources":["webpack:///client/pages/home.js","webpack:///client/utils/ajax.js"],"sourcesContent":["import React from 'react';\nimport colors from '../styles/colors';\nimport App from './components/container/app';\nimport HomePageHeader from './components/presentation/header/homePageHeader';\nimport { getJson } from '../utils/ajax';\nimport screenSizes from '../styles/screenSizes';\nimport { spacingXlg, spacingLg } from '../styles/spacing';\n\nconst HomePage = ({ message, backgroundImage, config, userAgent }) => [\n\t<App\n\t\tkey=\"app\"\n\t\tconfig={config}\n\t\tbackgroundImage={backgroundImage}\n\t\tstickMenuToBottom={true}\n\t\theader={<HomePageHeader {...config} />}\n\t\tuserAgent={userAgent}\n\t>\n\t\t<div className=\"message\">\n\t\t\t<p>{message}</p>\n\t\t</div>\n\t</App>,\n\t<style key=\"styles\" jsx=\"\">{`\n\t\t.message {\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\tjustify-content: center;\n\t\t\theight: 100%;\n\t\t\tmargin: 0 ${spacingLg()};\n\t\t\twidth: calc(100% - 100px);\n\n\t\t\tfont-size: 2em;\n\t\t\tcolor: ${colors.white};\n\t\t}\n\n\t\t@media (min-width: ${screenSizes.SM_MIN}) {\n\t\t\t.message {\n\t\t\t\theight: calc(100% - 100px);\n\t\t\t\tmargin: 0 ${spacingXlg()};\n\n\t\t\t\tfont-size: 2.5em;\n\t\t\t}\n\t\t}\n\t`}</style>,\n];\n\nHomePage.getInitialProps = async ({ req, query: { lang } }) => {\n\tconst { translations, settings } = await getJson(\n\t\treq,\n\t\t`/api/${lang ? encodeURIComponent(lang) + '/' : ''}config`\n\t);\n\tconst { message, backgroundImage } = await getJson(\n\t\treq,\n\t\t`/api/${encodeURIComponent(lang || settings.defaultLanguage)}/home-page`\n\t);\n\treturn {\n\t\tmessage,\n\t\tbackgroundImage: backgroundImage || '/img/home-banner.jpg',\n\t\tconfig: {\n\t\t\ttranslations,\n\t\t\tsettings,\n\t\t\tlang: lang || settings.defaultLanguage,\n\t\t},\n\t\tuserAgent: req && req.headers['user-agent'],\n\t};\n};\n\nexport default HomePage;\n\n\n\n// WEBPACK FOOTER //\n// client/pages/home.js","import 'isomorphic-unfetch';\n\nfunction getBaseUrl (req) {\n\tif (!req) {\n\t\treturn '';\n\t}\n\tconst host = req.hostname;\n\tif (host !== 'localhost') {\n\t\treturn 'https://my-bungalow.herokuapp.com';\n\t}\n\treturn req ? `${req.protocol}://${host}:3000` : '';\n}\n\nfunction getFullUrl (baseUrl, url, query = {}) {\n\tlet fullUrl = baseUrl + url;\n\tObject.keys(query).forEach((key, index) => {\n\t\tlet startChar = '&';\n\t\tif (index === 0) {\n\t\t\tstartChar = '?';\n\t\t}\n\t\tfullUrl += `${startChar}${encodeURIComponent(key)}=${encodeURIComponent(\n\t\t\tquery[key]\n\t\t)}`;\n\t});\n\treturn fullUrl;\n}\n\nexport async function getJson (req, url, query = {}) {\n\tconst baseUrl = getBaseUrl(req);\n\tconst fullUrl = getFullUrl(baseUrl, url, query);\n\tconst res = await fetch(fullUrl);\n\treturn await res.json();\n}\n\nexport function postJson (url, body = {}) {\n\treturn new Promise((resolve, reject) => {\n\t\tconst xhr = new XMLHttpRequest();\n\t\txhr.open('POST', url);\n\t\txhr.onreadystatechange = () => {\n\t\t\tif (xhr.readyState > 3) {\n\t\t\t\txhr.status === 200\n\t\t\t\t\t? resolve(xhr.responseText)\n\t\t\t\t\t: reject(new Error(xhr.responseText));\n\t\t\t}\n\t\t};\n\t\txhr.setRequestHeader('Content-Type', 'application/json');\n\t\txhr.send(JSON.stringify(body));\n\t});\n}\n\n\n\n// WEBPACK FOOTER //\n// client/utils/ajax.js"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAbA;AACA;AAoCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AAAA;AADA;AAAA;AACA;AADA;AAAA;AAKA;AAAA;AALA;AAUA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AARA;AACA;AAVA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAoBA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAGA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;;;;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AACA;AADA;AAGA;AAHA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;AAOA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAGA;AACA;AACA;AAAA;AACA;AACA;AACA;;;;A","sourceRoot":""}