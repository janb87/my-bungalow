{"version":3,"file":"7.1f803fd566689c2fe1f5.hot-update.js","sources":["webpack:///client/pages/bungalow.js","webpack:///client/utils/ajax.js"],"sourcesContent":["import React from 'react';\nimport App from './components/container/app';\nimport { getJson } from '../utils/ajax';\nimport localize from '../utils/localize';\nimport { spacingLg, spacingXlg } from '../styles/spacing';\nimport screenSizes from '../styles/screenSizes';\nimport Gallery from './components/presentation/gallery/gallery';\n\nconst Bungalow = ({ config, userAgent, bungalowPage }) => {\n\tconst photos = bungalowPage.images.map(({ url, width, height }) => ({\n\t\tsrc: url,\n\t\twidth: width,\n\t\theight: height,\n\t}));\n\treturn [\n\t\t<App key=\"app\" config={config} userAgent={userAgent}>\n\t\t\t<div className=\"the-bungalow\">\n\t\t\t\t<h1>{localize('the_bungalow_title', config.translations)}</h1>\n\t\t\t\t<h2>{localize('the_bungalow_general', config.translations)}</h2>\n\t\t\t\t<section\n\t\t\t\t\tdangerouslySetInnerHTML={{ __html: bungalowPage.characteristics }}\n\t\t\t\t/>\n\t\t\t\t{bungalowPage.groundPlanImage && (\n\t\t\t\t\t<section>\n\t\t\t\t\t\t<Gallery\n\t\t\t\t\t\t\tphotos={[{ src: bungalowPage.groundPlanImage }]}\n\t\t\t\t\t\t\ttranslations={config.translations}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</section>\n\t\t\t\t)}\n\t\t\t\t<section>\n\t\t\t\t\t<Gallery photos={photos} translations={config.translations} />\n\t\t\t\t</section>\n\t\t\t\t<h2>{localize('the_bungalow_house_rules', config.translations)}</h2>\n\t\t\t\t<section dangerouslySetInnerHTML={{ __html: bungalowPage.rules }} />\n\t\t\t</div>\n\t\t</App>,\n\t\t<style key=\"styles\" jsx=\"\">{`\n\t\t\t.the-bungalow {\n\t\t\t\tmargin: ${spacingLg()};\n\t\t\t}\n\t\t\t.the-bungalow section {\n\t\t\t\tmargin: ${spacingXlg()} 0;\n\t\t\t}\n\t\t\t.the-bungalow h2 + section {\n\t\t\t\tmargin-top: 0;\n\t\t\t}\n\t\t\t@media (min-width: ${screenSizes.SM_MIN}) {\n\t\t\t\t.the-bungalow {\n\t\t\t\t\tmargin: ${spacingXlg()};\n\t\t\t\t}\n\t\t\t}\n\t\t`}</style>,\n\t];\n};\n\nBungalow.getInitialProps = async ({ req, query: { lang } }) => {\n\tconst { translations, settings } = await getJson(\n\t\treq,\n\t\t`/api/${lang ? encodeURIComponent(lang) + '/' : ''}config`\n\t);\n\tconst bungalowPage = await getJson(\n\t\treq,\n\t\t`/api/${encodeURIComponent(lang || settings.defaultLanguage)}/bungalow-page`\n\t);\n\treturn {\n\t\tconfig: {\n\t\t\ttranslations,\n\t\t\tsettings,\n\t\t\tlang: lang || settings.defaultLanguage,\n\t\t},\n\t\tuserAgent: req && req.headers['user-agent'],\n\t\tbungalowPage,\n\t};\n};\n\nexport default Bungalow;\n\n\n\n// WEBPACK FOOTER //\n// client/pages/bungalow.js","import 'isomorphic-unfetch';\n\nfunction getBaseUrl (req) {\n\tif (!req) {\n\t\treturn '';\n\t}\n\tconst host = req.hostname;\n\tif (host !== 'localhost') {\n\t\treturn 'https://my-bungalow.herokuapp.com';\n\t}\n\treturn req ? `${req.protocol}://${host}:3000` : '';\n}\n\nfunction getFullUrl (baseUrl, url, query = {}) {\n\tlet fullUrl = baseUrl + url;\n\tObject.keys(query).forEach((key, index) => {\n\t\tlet startChar = '&';\n\t\tif (index === 0) {\n\t\t\tstartChar = '?';\n\t\t}\n\t\tfullUrl += `${startChar}${encodeURIComponent(key)}=${encodeURIComponent(\n\t\t\tquery[key]\n\t\t)}`;\n\t});\n\treturn fullUrl;\n}\n\nexport async function getJson (req, url, query = {}) {\n\tconst baseUrl = getBaseUrl(req);\n\tconst fullUrl = getFullUrl(baseUrl, url, query);\n\tconst res = await fetch(fullUrl);\n\treturn await res.json();\n}\n\nexport function postJson (url, body = {}) {\n\treturn new Promise((resolve, reject) => {\n\t\tconst xhr = new XMLHttpRequest();\n\t\txhr.open('POST', url);\n\t\txhr.onreadystatechange = () => {\n\t\t\tif (xhr.readyState > 3) {\n\t\t\t\txhr.status === 200\n\t\t\t\t\t? resolve(xhr.responseText)\n\t\t\t\t\t: reject(new Error(xhr.responseText));\n\t\t\t}\n\t\t};\n\t\txhr.setRequestHeader('Content-Type', 'application/json');\n\t\txhr.send(JSON.stringify(body));\n\t});\n}\n\n\n\n// WEBPACK FOOTER //\n// client/utils/ajax.js"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAHA;AAAA;AAKA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAiBA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AAAA;AADA;AAAA;AACA;AADA;AAKA;AALA;AAUA;AACA;AACA;AACA;AAHA;AAKA;AACA;AAPA;AACA;AAVA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAmBA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5EA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAGA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;;;;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AACA;AADA;AAGA;AAHA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;AAOA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAGA;AACA;AACA;AAAA;AACA;AACA;AACA;;;;A","sourceRoot":""}